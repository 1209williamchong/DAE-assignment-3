<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>開源軟體清單</title>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />
    <style>
        ion-item {
            --inner-padding-end: 10px;
        }
        ion-avatar {
            margin-right: 10px;
        }
        .video-container {
            margin-top: 10px;
        }
        .video-container iframe {
            width: 100%;
            max-width: 560px;
            height: 315px;
            border: none;
        }
        /* 簡易響應式設計 */
        @media (max-width: 600px) {
            .video-container iframe {
                height: 200px;
            }
        }
        .software-item {
            border: 1px solid #ccc;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 5px;
        }
        .item-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .software-icon {
            width: 80px;
            height: 80px;
            margin-right: 15px;
            border-radius: 5px;
            object-fit: contain; /* 確保圖片完整顯示在容器內 */
        }
        .software-details {
            flex-grow: 1;
        }
        .detail-label {
            font-weight: bold;
            margin-right: 5px;
        }
        .category-tag {
            color: var(--ion-color-primary);
            cursor: pointer;
        }
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <ion-app>
        <ion-header>
            <ion-toolbar>
              <ion-title>開源軟體清單</ion-title>
            </ion-toolbar>
          
            <!-- 搜尋列 -->
            <ion-searchbar id="searchInput" placeholder="搜尋..."></ion-searchbar>
          
            <!-- 🔽 新增：排序選單 -->
            <ion-item>
              <ion-select label="排序方式" id="sortSelect" interface="popover" value="name">
                <ion-select-option value="name">名稱</ion-select-option>
                <ion-select-option value="version">版本</ion-select-option>
              </ion-select>
            </ion-item>
          
            <!-- 分類篩選 -->
            <ion-item>
              <ion-select label="分類" interface="popover" id="categorySelect" multiple="true">
                <ion-select-option value="">全部</ion-select-option>
                <ion-select-option value="網頁瀏覽器">網頁瀏覽器</ion-select-option>
                <ion-select-option value="作業系統">作業系統</ion-select-option>
                <ion-select-option value="辦公室軟體">辦公室軟體</ion-select-option>
                <ion-select-option value="圖像編輯器">圖像編輯器</ion-select-option>
                <ion-select-option value="版本控制">版本控制</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-header>
          
        <ion-content>
            <div id="softwareListContainer">
                <div class="software-item" data-category="網頁瀏覽器">
                    <div class="item-header">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Firefox_logo_2017.svg/800px-Firefox_logo_2017.svg.png" alt="Mozilla Firefox 圖示" class="software-icon" width="80" height="80">
                        <div class="software-details">
                            <h2>Mozilla Firefox</h2>
                            <p><span class="detail-label">版本：</span>125.0.1 (截至 2025 年 4 月)</p>
                            <p><span class="detail-label">授權條款：</span>Mozilla Public License 2.0</p>
                            <p><span class="detail-label">用途：</span><span class="category-tag">網頁瀏覽器</span>，用於存取和瀏覽全球資訊網上的內容。</p>
                        </div>
                    </div>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/agboT1w_e4g" title="Mozilla Firefox 示範影片" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="software-item" data-category="作業系統">
                    <div class="item-header">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/35/Tux.svg/800px-Tux.svg.png" alt="Linux (Ubuntu) 圖示" class="software-icon" width="80" height="80">
                        <div class="software-details">
                            <h2>Linux (Ubuntu)</h2>
                            <p><span class="detail-label">版本：</span>24.04 LTS (Noble Numbat) (截至 2025 年 4 月)</p>
                            <p><span class="detail-label">授權條款：</span>GNU General Public License (GPL)</p>
                            <p><span class="detail-label">用途：</span><span class="category-tag">作業系統</span>，提供電腦硬體和軟體資源的管理，並為應用程式提供執行環境。</p>
                        </div>
                    </div>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/mS4Ci-zZ9A4" title="Ubuntu 24.04 LTS 示範影片" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="software-item" data-category="辦公室軟體">
                    <div class="item-header">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/LibreOffice_logo.svg/800px-LibreOffice_logo.svg.png" alt="LibreOffice 圖示" class="software-icon" width="80" height="80">
                        <div class="software-details">
                            <h2>LibreOffice</h2>
                            <p><span class="detail-label">版本：</span>24.2.3 (截至 2025 年 4 月)</p>
                            <p><span class="detail-label">授權條款：</span>Mozilla Public License v2.0</p>
                            <p><span class="detail-label">用途：</span><span class="category-tag">辦公室軟體</span>，包含文書處理、試算表、簡報、資料庫和繪圖等應用程式。</p>
                        </div>
                    </div>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/nF0-612j61I" title="LibreOffice 7.6 示範影片" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="software-item" data-category="圖像編輯器">
                    <div class="item-header">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/GIMP_logo.svg/800px-GIMP_logo.svg.png" alt="GIMP 圖示" class="software-icon" width="80" height="80">
                        <div class="software-details">
                            <h2>GIMP</h2>
                            <p><span class="detail-label">版本：</span>2.10.36 (截至 2025 年 4 月)</p>
                            <p><span class="detail-label">授權條款：</span>GNU General Public License v3.0</p>
                            <p><span class="detail-label">用途：</span><span class="category-tag">圖像編輯器</span>，用於圖像修飾、合成和建立。</p>
                        </div>
                    </div>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/9ylj97R3R7s" title="GIMP 2.10 功能示範" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="software-item" data-category="版本控制">
                    <div class="item-header">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Git-logo.svg/800px-Git-logo.svg.png" alt="Git 圖示" class="software-icon" width="80" height="80">
                        <div class="software-details">
                            <h2>Git</h2>
                            <p><span class="detail-label">版本：</span>2.45.0 (截至 2025 年 4 月)</p>
                            <p><span class="detail-label">授權條款：</span>GNU General Public License v2.0</p>
                            <p><span class="detail-label">用途：</span><span class="category-tag">版本控制</span>，分散式版本控制系統，用於追蹤程式碼的變更。</p>
                        </div>
                    </div>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/qw--VYLhZUE" title="Git 基礎示範" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </ion-content>
    </ion-app>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('searchInput');
            const softwareItems = Array.from(document.querySelectorAll('.software-item'));
            const categorySelect = document.getElementById('categorySelect');
            const sortSelect = document.getElementById('sortSelect');
        
            function parseVersion(text) {
                const match = text.match(/[\d\.]+/);
                return match ? match[0] : '';
            }
        
            function applyFilters() {
                const searchTerm = searchInput.value.toLowerCase();
                const selectedCategories = categorySelect.value || [];
                const sortBy = sortSelect.value;
        
                let filtered = softwareItems.filter(item => {
                    const title = item.querySelector('.software-details h2')?.textContent.toLowerCase() || '';
                    const description = item.querySelector('.software-details p:nth-child(3)')?.textContent.toLowerCase() || '';
                    const category = item.dataset.category;
        
                    const matchesSearch = title.includes(searchTerm) || description.includes(searchTerm);
                    const matchesCategory = selectedCategories.length === 0 || selectedCategories.includes(category);
                    return matchesSearch && matchesCategory;
                });
        
                // 排序
                if (sortBy === 'name') {
                    filtered.sort((a, b) => {
                        const nameA = a.querySelector('h2')?.textContent.toLowerCase() || '';
                        const nameB = b.querySelector('h2')?.textContent.toLowerCase() || '';
                        return nameA.localeCompare(nameB);
                    });
                } else if (sortBy === 'version') {
                    filtered.sort((a, b) => {
                        const verA = parseVersion(a.querySelector('p')?.textContent || '');
                        const verB = parseVersion(b.querySelector('p')?.textContent || '');
                        return verB.localeCompare(verA, undefined, { numeric: true });
                    });
                }
        
                // 顯示/隱藏 & 依排序重組
                const container = document.getElementById('softwareListContainer');
                softwareItems.forEach(item => item.classList.add('hidden'));
                filtered.forEach(item => {
                    item.classList.remove('hidden');
                    container.appendChild(item);
                });
            }
        
            // 綁定事件
            searchInput.addEventListener('input', applyFilters);
            categorySelect.addEventListener('ionChange', applyFilters);
            sortSelect.addEventListener('ionChange', applyFilters);
        
            // 點擊分類標籤快速過濾（選中那一個分類）
            const categoryTags = document.querySelectorAll('.category-tag');
            categoryTags.forEach(tag => {
                tag.addEventListener('click', (event) => {
                    const category = event.target.textContent;
                    categorySelect.value = [category];
                    categorySelect.dispatchEvent(new CustomEvent('ionChange', {
                        detail: { value: [category] }
                    }));
                });
            });
        });
        </script>
</body>
</html>